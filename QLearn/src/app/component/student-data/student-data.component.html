<app-nav-admin></app-nav-admin>


<div class="container" *ngIf="roles !== 'Student'">
  <h4 class="text-center p-2">Students List</h4>
  <!-- Dropdown Filter -->
  <div class="mb-3 search">
    <select class="form-select" [(ngModel)]="filterOption">
      <option value="all">All Students</option>
      <option value="enrolled">Enrolled Only</option>
    </select>
  </div>
<div class="container mt-4">
  <button class="btn btn-primary" (click)="showForm = !showForm">
    {{ showForm ? 'Hide' : 'Add Student' }}
  </button>

  <form *ngIf="showForm" [formGroup]="studentForm" (ngSubmit)="onSubmit()" class="mt-4 border p-4 rounded shadow">
    <!-- Name -->
    <div class="mb-3">
      <label>Name</label>
      <input type="text" formControlName="name" class="form-control" />
      <div class="text-danger" *ngIf="studentForm.get('name')?.touched && studentForm.get('name')?.invalid">
        Name is required (min 3 chars).
      </div>
    </div>

    <!-- Student ID -->
    <div class="mb-3">
      <label>Student ID</label>
      <input type="text" formControlName="studentId" class="form-control" />
      <div class="text-danger" *ngIf="studentForm.get('studentId')?.touched && studentForm.get('studentId')?.invalid">
        Student ID is required.
      </div>
    </div>

    <!-- Department -->
    <div class="mb-3">
      <label>Department</label>
      <input type="text" formControlName="department" class="form-control" />
      <div class="text-danger" *ngIf="studentForm.get('department')?.touched && studentForm.get('department')?.invalid">
        Department is required.
      </div>
    </div>

    <!-- Email -->
    <div class="mb-3">
      <label>Email</label>
      <input type="email" formControlName="email" class="form-control" />
      <div class="text-danger" *ngIf="studentForm.get('email')?.touched && studentForm.get('email')?.invalid">
        Valid email is required.
      </div>
    </div>

    <button type="submit" class="btn btn-success">Submit</button>
  </form>
</div>

  <!-- Cards -->
  <div class="row mt-2">
    <div
      class="col-md-4 mb-4"
      *ngFor="let student of filteredStudents()"
    >
      <div class="card h-100 shadow-sm"    data-aos="fade-up"
      data-aos-duration="800">
        <div class="card-body">
          <h5 class="card-title text-primary">{{ student.name }}</h5>
          <h6 class="card-subtitle mb-2 text-muted">{{ student.studentId }}</h6>
          <p class="card-text">
            <strong>Department:</strong> {{ student.department }}<br />
            <strong>Email:</strong> {{ student.email }}<br />
            <strong>Courses:</strong>
            {{ student.enrolledCourses.join(', ') }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>


